{"uid":"c26b669cb76a736a","name":"Takeover fails with invalid OTP","fullName":"A Debtor Service Provider performs takeover of an existing activation: Takeover fails with invalid OTP","historyId":"2303315f277b25dd1fdfbd44056c9d94","time":{"start":1762936137066,"stop":1762936137574,"duration":508},"status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/behave/model.py\", line 1991, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/behave/matchers.py\", line 105, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"bdd-tests/steps/auth_steps.py\", line 25, in given_ec_on_page\n    access_token = get_valid_access_token(\n        client_id=client_id,\n        client_secret=client_secret,\n        access_token_function=get_access_token\n    )\n  File \"/home/runner/work/rtp-platform-qa/rtp-platform-qa/api/auth.py\", line 8, in get_valid_access_token\n    token_response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/behave/model.py\", line 1991, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/behave/matchers.py\", line 105, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"bdd-tests/steps/auth_steps.py\", line 25, in given_ec_on_page\n    access_token = get_valid_access_token(\n        client_id=client_id,\n        client_secret=client_secret,\n        access_token_function=get_access_token\n    )\n  File \"/home/runner/work/rtp-platform-qa/rtp-platform-qa/api/auth.py\", line 8, in get_valid_access_token\n    token_response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\n","steps":[{"name":"Given the debtor Service Provider is authenticated","time":{"start":1762936137066,"stop":1762936137573,"duration":507},"status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/behave/model.py\", line 1991, in run\n    match.run(runner.context)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/behave/matchers.py\", line 105, in run\n    self.func(context, *args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"bdd-tests/steps/auth_steps.py\", line 25, in given_ec_on_page\n    access_token = get_valid_access_token(\n        client_id=client_id,\n        client_secret=client_secret,\n        access_token_function=get_access_token\n    )\n  File \"/home/runner/work/rtp-platform-qa/rtp-platform-qa/api/auth.py\", line 8, in get_valid_access_token\n    token_response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false},{"name":"And the debtor Service Provider B is authenticated","time":{"start":1762936137574,"stop":1762936137574,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"And the debtor A has fiscal code random","time":{"start":1762936137574,"stop":1762936137574,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"And the debtor Service Provider activated the debtor A","time":{"start":1762936137574,"stop":1762936137574,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"When the debtor Service Provider B tries takeover with invalid OTP for debtor A","time":{"start":1762936137574,"stop":1762936137574,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"Then the takeover fails because of invalid OTP","time":{"start":1762936137574,"stop":1762936137574,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":6,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"tag","value":"activation"},{"name":"tag","value":"authentication"},{"name":"tag","value":"takeover"},{"name":"tag","value":"unhappy_path"},{"name":"feature","value":"A Debtor Service Provider performs takeover of an existing activation"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":27,"skipped":0,"passed":0,"unknown":0,"total":27},"items":[{"uid":"34161762f58377cc","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762878264674,"stop":1762878265327,"duration":653}},{"uid":"d9d2b0ebb08fb5d8","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762877461938,"stop":1762877462572,"duration":634}},{"uid":"2d2e0377cfa8730","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762852181580,"stop":1762852182159,"duration":579}},{"uid":"7c0325aa1bbe91ff","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762842256282,"stop":1762842256924,"duration":642}},{"uid":"f141c750c6beb4a","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762756022217,"stop":1762756023042,"duration":825}},{"uid":"4600977eaca6255d","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762669337438,"stop":1762669337912,"duration":474}},{"uid":"7bc5d5fba7c0d2a3","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762582926651,"stop":1762582927357,"duration":706}},{"uid":"848a117c0399da39","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762504402211,"stop":1762504403041,"duration":830}},{"uid":"17a32e02ff33e7f5","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762496669431,"stop":1762496670065,"duration":634}},{"uid":"63d811f5cf6f398f","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762410281387,"stop":1762410281977,"duration":590}},{"uid":"51fc2669ad24858e","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762351875190,"stop":1762351875695,"duration":505}},{"uid":"98cd0f751b1f7e65","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762350406119,"stop":1762350406717,"duration":598}},{"uid":"abe5b3d7fe96f62d","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762349503283,"stop":1762349503892,"duration":609}},{"uid":"6b5eb38be043bf5f","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762343714505,"stop":1762343715069,"duration":564}},{"uid":"dda87c1c2ab3e2ac","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762339292758,"stop":1762339293302,"duration":544}},{"uid":"749c4b14ef52903f","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762338714215,"stop":1762338714780,"duration":565}},{"uid":"2a978ad62e1a8b69","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762337576576,"stop":1762337577183,"duration":607}},{"uid":"5e41fa8545998d81","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762335820275,"stop":1762335820781,"duration":506}},{"uid":"65613546b0107977","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762335234946,"stop":1762335235594,"duration":648}},{"uid":"f0a2632d44907733","status":"broken","statusDetails":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n","time":{"start":1762334078805,"stop":1762334079260,"duration":455}}]},"tags":["takeover","activation","unhappy_path","authentication"]},"source":"c26b669cb76a736a.json","parameterValues":[]}