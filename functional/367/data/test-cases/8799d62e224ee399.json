{"uid":"8799d62e224ee399","name":"RTP cancellation fails if ID does not exist","fullName":"tests.test_cancel_rtp#test_cancel_rtp_with_nonexistent_resource_id","historyId":"e4356ee1dbc1bc7a182dccbdb2e03e1d","time":{"start":1749482224297,"stop":1749482224907,"duration":610},"status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token","statusTrace":"@allure.feature('RTP Callback')\n    @allure.story('Service provider cancels RTP')\n    @allure.title('RTP cancellation fails if ID does not exist')\n    @pytest.mark.cancel\n    @pytest.mark.unhappy_path\n    def test_cancel_rtp_with_nonexistent_resource_id():\n>       creditor_service_provider_access_token = get_valid_access_token(\n            client_id=secrets.creditor_service_provider.client_id,\n            client_secret=secrets.creditor_service_provider.client_secret,\n            access_token_function=get_access_token)\n\nfunctional-tests/tests/test_cancel_rtp.py:52: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \napi/auth.py:8: in get_valid_access_token\n    token_response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n\n/opt/hostedtoolcache/Python/3.13.3/x64/lib/python3.13/site-packages/requests/models.py:1024: HTTPError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1749482217347,"stop":1749482217403,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"feature","value":"RTP Callback"},{"name":"story","value":"Service provider cancels RTP"},{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"cancel"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_cancel_rtp"},{"name":"host","value":"pkrvmf6wy0o8zjz"},{"name":"thread","value":"2494-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cancel_rtp"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":87,"unknown":0,"total":89},"items":[{"uid":"e9d7b93f7361aab5","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/363//#testresult/e9d7b93f7361aab5","status":"passed","time":{"start":1749452885284,"stop":1749452886160,"duration":876}},{"uid":"30a5b74834c8596c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/362//#testresult/30a5b74834c8596c","status":"passed","time":{"start":1749366431164,"stop":1749366432397,"duration":1233}},{"uid":"f3ec6ed63bdf4f15","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/361//#testresult/f3ec6ed63bdf4f15","status":"passed","time":{"start":1749280014562,"stop":1749280015411,"duration":849}},{"uid":"a26cb0cf4790c370","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/360//#testresult/a26cb0cf4790c370","status":"passed","time":{"start":1749193622914,"stop":1749193623613,"duration":699}},{"uid":"22502a77e492bb7b","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/359//#testresult/22502a77e492bb7b","status":"passed","time":{"start":1749107250213,"stop":1749107251479,"duration":1266}},{"uid":"c459bbe307f9a97a","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/358//#testresult/c459bbe307f9a97a","status":"passed","time":{"start":1749020833153,"stop":1749020833977,"duration":824}},{"uid":"95e9bcfddbf4149e","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/357//#testresult/95e9bcfddbf4149e","status":"passed","time":{"start":1748956568298,"stop":1748956569431,"duration":1133}},{"uid":"3d5cc4d58e40c6c1","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/356//#testresult/3d5cc4d58e40c6c1","status":"passed","time":{"start":1748953133908,"stop":1748953134876,"duration":968}},{"uid":"832c0219fffa8a9a","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/355//#testresult/832c0219fffa8a9a","status":"passed","time":{"start":1748934477780,"stop":1748934478508,"duration":728}},{"uid":"401f5f2d6e533c7c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/354//#testresult/401f5f2d6e533c7c","status":"passed","time":{"start":1748848074628,"stop":1748848075342,"duration":714}},{"uid":"45f8d343477dc5e7","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/353//#testresult/45f8d343477dc5e7","status":"passed","time":{"start":1748761631025,"stop":1748761632258,"duration":1233}},{"uid":"7f86f2e921e5e696","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/352//#testresult/7f86f2e921e5e696","status":"passed","time":{"start":1748675220871,"stop":1748675221718,"duration":847}},{"uid":"4fa01e995dc6129c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/351//#testresult/4fa01e995dc6129c","status":"passed","time":{"start":1748588835692,"stop":1748588836941,"duration":1249}},{"uid":"c163b0c8b2bac181","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/350//#testresult/c163b0c8b2bac181","status":"passed","time":{"start":1748534033390,"stop":1748534034219,"duration":829}},{"uid":"2cc77ef65cc0acd","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/349//#testresult/2cc77ef65cc0acd","status":"passed","time":{"start":1748502460292,"stop":1748502461701,"duration":1409}},{"uid":"b5b40e1d974f5a33","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/348//#testresult/b5b40e1d974f5a33","status":"passed","time":{"start":1748449654264,"stop":1748449655337,"duration":1073}},{"uid":"3f18a9c45033e5bd","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/347//#testresult/3f18a9c45033e5bd","status":"passed","time":{"start":1748442446856,"stop":1748442447599,"duration":743}},{"uid":"66610af0a115750c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/346//#testresult/66610af0a115750c","status":"passed","time":{"start":1748441500930,"stop":1748441501614,"duration":684}},{"uid":"53406b05ea111474","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/345//#testresult/53406b05ea111474","status":"passed","time":{"start":1748436779321,"stop":1748436780059,"duration":738}},{"uid":"762c025aa3b32311","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/344//#testresult/762c025aa3b32311","status":"broken","statusDetails":"AttributeError: 'dict' object has no attribute 'creditor_service_provider'","time":{"start":1748417982664,"stop":1748417982664,"duration":0}}]},"tags":["cancel","unhappy_path"]},"source":"8799d62e224ee399.json","parameterValues":[]}