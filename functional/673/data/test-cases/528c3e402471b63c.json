{"uid":"528c3e402471b63c","name":"Test Takeover Fails with Invalid OTP","fullName":"functional-tests.tests.test_takeover#test_takeover_fails_invalid_otp","historyId":"a5ee859e3fe4e378796c2779b26e4f52","time":{"start":1763982853290,"stop":1763982853647,"duration":357},"description":"Test that takeover fails when an invalid OTP is provided","descriptionHtml":"<p>Test that takeover fails when an invalid OTP is provided</p>\n","status":"failed","statusMessage":"AssertionError: Failed to activate user with service provider A: { \"statusCode\": 401, \"message\": \"Invalid JWT.\" }\nassert 401 == 201\n +  where 401 = <Response [401]>.status_code","statusTrace":"random_fiscal_code = 'BTGTTN66C17X000P', token_a = 'Bearer ***REDACTED***'\ntoken_b = 'Bearer ***REDACTED***'\n\n    @allure.epic('Activation')\n    @allure.feature('Takeover unhappy path')\n    @allure.title('Test Takeover Fails with Invalid OTP')\n    @allure.story('Takeover fails because of valid OTP')\n    @pytest.mark.functional\n    @allure.tag('functional', 'unhappy_path', 'activation', 'takeover')\n    @pytest.mark.unhappy_path\n    def test_takeover_fails_invalid_otp(random_fiscal_code, token_a, token_b):\n        \"\"\"Test that takeover fails when an invalid OTP is provided\"\"\"\n    \n        activation_response = activate(token_a, random_fiscal_code, secrets.debtor_service_provider.service_provider_id)\n>       assert activation_response.status_code == 201, f\"Failed to activate user with service provider A: {activation_response.text}\"\nE       AssertionError: Failed to activate user with service provider A: { \"statusCode\": 401, \"message\": \"Invalid JWT.\" }\nE       assert 401 == 201\nE        +  where 401 = <Response [401]>.status_code\n\nfunctional-tests/tests/test_takeover.py:101: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1763982759205,"stop":1763982759270,"duration":65},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token_a","time":{"start":1763982852569,"stop":1763982852928,"duration":359},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_fiscal_code","time":{"start":1763982852569,"stop":1763982852569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token_b","time":{"start":1763982852928,"stop":1763982853290,"duration":362},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"functional"},{"name":"epic","value":"Activation"},{"name":"story","value":"Takeover fails because of valid OTP"},{"name":"tag","value":"activation"},{"name":"feature","value":"Takeover unhappy path"},{"name":"tag","value":"takeover"},{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"functional"},{"name":"parentSuite","value":"functional-tests.tests"},{"name":"suite","value":"test_takeover"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2513-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"functional-tests.tests.test_takeover"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":17,"unknown":0,"total":18},"items":[{"uid":"c0a5b4cebba39ee0","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/672/#testresult/c0a5b4cebba39ee0","status":"passed","time":{"start":1763978684547,"stop":1763978687253,"duration":2706}},{"uid":"4c5622d15ce06eb8","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/671/#testresult/4c5622d15ce06eb8","status":"passed","time":{"start":1763965706085,"stop":1763965707586,"duration":1501}},{"uid":"6b6c485756ae3885","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/670/#testresult/6b6c485756ae3885","status":"passed","time":{"start":1763879133775,"stop":1763879135109,"duration":1334}},{"uid":"8e0f01b30de81030","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/669/#testresult/8e0f01b30de81030","status":"passed","time":{"start":1763792708037,"stop":1763792709937,"duration":1900}},{"uid":"1d72af4117aec48c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/668/#testresult/1d72af4117aec48c","status":"passed","time":{"start":1763706520191,"stop":1763706522181,"duration":1990}},{"uid":"1e978bb900e2f57","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/667/#testresult/1e978bb900e2f57","status":"passed","time":{"start":1763620015288,"stop":1763620017171,"duration":1883}},{"uid":"742d05014552ed32","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/666/#testresult/742d05014552ed32","status":"passed","time":{"start":1763533604820,"stop":1763533606036,"duration":1216}},{"uid":"67a14eabc67b1b51","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/665/#testresult/67a14eabc67b1b51","status":"passed","time":{"start":1763447222711,"stop":1763447224078,"duration":1367}},{"uid":"5afad2ac4c4fb090","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/664/#testresult/5afad2ac4c4fb090","status":"passed","time":{"start":1763360888955,"stop":1763360890443,"duration":1488}},{"uid":"d848fbbb71b5c2d5","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/663/#testresult/d848fbbb71b5c2d5","status":"passed","time":{"start":1763274345327,"stop":1763274347225,"duration":1898}},{"uid":"ad116d29a8095467","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/662/#testresult/ad116d29a8095467","status":"passed","time":{"start":1763187919737,"stop":1763187921690,"duration":1953}},{"uid":"7d7a10a8e1620b7c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/661/#testresult/7d7a10a8e1620b7c","status":"passed","time":{"start":1763101674253,"stop":1763101676203,"duration":1950}},{"uid":"bdd747dcf509f094","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/660/#testresult/bdd747dcf509f094","status":"passed","time":{"start":1763044428803,"stop":1763044430068,"duration":1265}},{"uid":"b3f491663c27d2df","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/659/#testresult/b3f491663c27d2df","status":"passed","time":{"start":1763015204994,"stop":1763015206973,"duration":1979}},{"uid":"e9d3bd73ffa92a52","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/658/#testresult/e9d3bd73ffa92a52","status":"passed","time":{"start":1762965077421,"stop":1762965078800,"duration":1379}},{"uid":"2c95e509febde7b3","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/657/#testresult/2c95e509febde7b3","status":"passed","time":{"start":1762956857415,"stop":1762956859523,"duration":2108}},{"uid":"592f11e0604ca702","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/656/#testresult/592f11e0604ca702","status":"passed","time":{"start":1762941900017,"stop":1762941901356,"duration":1339}}]},"tags":["functional","takeover","activation","unhappy_path"]},"source":"528c3e402471b63c.json","parameterValues":[]}