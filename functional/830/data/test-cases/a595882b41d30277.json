{"uid":"a595882b41d30277","name":"Cannot send RTP with an amount over the POSTE limit","fullName":"functional-tests.tests.test_availability_POSTE#test_send_rtp_to_poste_over_limit_amount","historyId":"91e3b0a6ddf199149c5772992e11681e","time":{"start":1771570375252,"stop":1771570376346,"duration":1094},"description":"\nTests that sending an RTP payload with an amount over the POSTE limit results in a 400 Bad Request response.\n\n:param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.\n:type debtor_sp_mock_cert_key: Tuple[str, str]\n","descriptionHtml":"<p>Tests that sending an RTP payload with an amount over the POSTE limit results in a 400 Bad Request response.</p>\n<p>:param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.<br />\n:type debtor_sp_mock_cert_key: Tuple[str, str]</p>\n","status":"failed","statusMessage":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","statusTrace":"debtor_sp_mock_cert_key = ('/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem', '/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/key.pem')\n\n    @allure.epic('POSTE Availability')\n    @allure.feature('RTP Send')\n    @allure.story('Service provider sends an RTP to POSTE')\n    @allure.title('Cannot send RTP with an amount over the POSTE limit')\n    @allure.tag('functional', 'unhappy_path', 'rtp_send', 'poste_availability')\n    @pytest.mark.send\n    @pytest.mark.unhappy_path\n    @pytest.mark.poste\n    def test_send_rtp_to_poste_over_limit_amount(debtor_sp_mock_cert_key: Tuple[str, str]):\n        \"\"\"\n        Tests that sending an RTP payload with an amount over the POSTE limit results in a 400 Bad Request response.\n    \n        :param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.\n        :type debtor_sp_mock_cert_key: Tuple[str, str]\n        \"\"\"\n        cert, key = debtor_sp_mock_cert_key\n    \n        over_limit_amount = 1_000_000_000_000\n        rtp_data = generate_rtp_data(amount=over_limit_amount)\n        poste_payload = generate_epc_rtp_data(rtp_data, bic='PPAYITR1XXX')\n        token = get_poste_access_token(\n            cert, key, secrets.poste_oauth.client_id, secrets.poste_oauth.client_secret)\n    \n        response = send_srtp_to_poste(token, poste_payload)\n    \n>       assert response.status_code == 400\nE       assert 201 == 400\nE        +  where 201 = <Response [201]>.status_code\n\nfunctional-tests/tests/test_availability_POSTE.py:112: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1771570155955,"stop":1771570156026,"duration":71},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"debtor_sp_mock_cert_key","time":{"start":1771570375209,"stop":1771570375252,"duration":43},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"feature","value":"RTP Send"},{"name":"tag","value":"poste_availability"},{"name":"tag","value":"unhappy_path"},{"name":"epic","value":"POSTE Availability"},{"name":"story","value":"Service provider sends an RTP to POSTE"},{"name":"tag","value":"functional"},{"name":"tag","value":"rtp_send"},{"name":"tag","value":"poste"},{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"send"},{"name":"parentSuite","value":"functional-tests.tests"},{"name":"suite","value":"test_availability_POSTE"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"2598-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"functional-tests.tests.test_availability_POSTE"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":78,"broken":0,"skipped":0,"passed":49,"unknown":0,"total":127},"items":[{"uid":"187ba6045dbe1838","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/829/#testresult/187ba6045dbe1838","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771484255856,"stop":1771484256835,"duration":979}},{"uid":"b5078e61e6c9d3ff","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/828/#testresult/b5078e61e6c9d3ff","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771398008755,"stop":1771398009943,"duration":1188}},{"uid":"915cb6514dd80d81","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/827/#testresult/915cb6514dd80d81","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771316054807,"stop":1771316056231,"duration":1424}},{"uid":"6c1ffbf268e5f1d9","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/826/#testresult/6c1ffbf268e5f1d9","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771311376736,"stop":1771311377748,"duration":1012}},{"uid":"7e480c74ad99e271","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/825/#testresult/7e480c74ad99e271","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771241413803,"stop":1771241414667,"duration":864}},{"uid":"59f79f65f295ecc8","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/824/#testresult/59f79f65f295ecc8","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771225219719,"stop":1771225220701,"duration":982}},{"uid":"e38e6de851ce995f","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/823/#testresult/e38e6de851ce995f","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771138007351,"stop":1771138008168,"duration":817}},{"uid":"d49c2500a1a84024","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/822/#testresult/d49c2500a1a84024","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1771051325855,"stop":1771051326729,"duration":874}},{"uid":"f0f1ea20404c4451","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/821/#testresult/f0f1ea20404c4451","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770965869497,"stop":1770965871126,"duration":1629}},{"uid":"b41180d1ce4079df","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/820/#testresult/b41180d1ce4079df","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770879530082,"stop":1770879531368,"duration":1286}},{"uid":"b542c57479b6c75f","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/819/#testresult/b542c57479b6c75f","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770793151797,"stop":1770793152888,"duration":1091}},{"uid":"9b9bedf8f991488b","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/818/#testresult/9b9bedf8f991488b","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770732477292,"stop":1770732479344,"duration":2052}},{"uid":"a9591f927cf8f828","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/817/#testresult/a9591f927cf8f828","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770706942960,"stop":1770706944142,"duration":1182}},{"uid":"9f6880ef9446eae7","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/816/#testresult/9f6880ef9446eae7","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770620577839,"stop":1770620578969,"duration":1130}},{"uid":"3b1b8b87994582d8","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/815/#testresult/3b1b8b87994582d8","status":"failed","statusDetails":"AssertionError: assert 502 == 400\n +  where 502 = <Response [502]>.status_code","time":{"start":1770533206929,"stop":1770533207743,"duration":814}},{"uid":"127bcc2387a07ea","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/814/#testresult/127bcc2387a07ea","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770446351349,"stop":1770446352249,"duration":900}},{"uid":"92f61d39dbaa76d6","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/813/#testresult/92f61d39dbaa76d6","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770360694569,"stop":1770360695921,"duration":1352}},{"uid":"a34e0f8bb37c1ecd","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/812/#testresult/a34e0f8bb37c1ecd","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770290099778,"stop":1770290100956,"duration":1178}},{"uid":"c4cb57590013f06d","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/811/#testresult/c4cb57590013f06d","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770289278608,"stop":1770289279415,"duration":807}},{"uid":"c525e37f11efe007","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/810/#testresult/c525e37f11efe007","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770288764336,"stop":1770288765927,"duration":1591}}]},"tags":["rtp_send","functional","poste_availability","poste","unhappy_path","send"]},"source":"a595882b41d30277.json","parameterValues":[]}