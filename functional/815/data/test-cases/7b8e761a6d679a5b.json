{"uid":"7b8e761a6d679a5b","name":"An RTP is sent through POSTE API","fullName":"functional-tests.tests.test_availability_POSTE#test_send_rtp_to_poste","historyId":"d7eb83835849839a3f3cdd13d18fd735","time":{"start":1770533205204,"stop":1770533205999,"duration":795},"description":"\nTests sending an RTP payload to the POSTE endpoint with valid data and authentication.\n\n:param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.\n:type debtor_sp_mock_cert_key: Tuple[str, str]\n","descriptionHtml":"<p>Tests sending an RTP payload to the POSTE endpoint with valid data and authentication.</p>\n<p>:param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.<br />\n:type debtor_sp_mock_cert_key: Tuple[str, str]</p>\n","status":"failed","statusMessage":"AssertionError: assert 502 == 201\n +  where 502 = <Response [502]>.status_code","statusTrace":"debtor_sp_mock_cert_key = ('/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem', '/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/key.pem')\n\n    @allure.epic('POSTE Availability')\n    @allure.feature('RTP Send')\n    @allure.story('Service provider sends an RTP to POSTE directly')\n    @allure.title('An RTP is sent through POSTE API')\n    @allure.tag('functional', 'happy_path', 'rtp_send', 'poste_availability')\n    @pytest.mark.send\n    @pytest.mark.happy_path\n    @pytest.mark.poste\n    def test_send_rtp_to_poste(debtor_sp_mock_cert_key: Tuple[str, str]):\n        \"\"\"\n        Tests sending an RTP payload to the POSTE endpoint with valid data and authentication.\n    \n        :param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.\n        :type debtor_sp_mock_cert_key: Tuple[str, str]\n        \"\"\"\n        cert, key = debtor_sp_mock_cert_key\n    \n        amount = random.randint(100, 10000)\n        rtp_data = generate_rtp_data(amount=amount)\n        poste_payload = generate_epc_rtp_data(rtp_data, bic='PPAYITR1XXX')\n        token = get_poste_access_token(\n            cert, key, secrets.poste_oauth.client_id, secrets.poste_oauth.client_secret)\n    \n        response = send_srtp_to_poste(token, poste_payload)\n    \n>       assert response.status_code == 201\nE       assert 502 == 201\nE        +  where 502 = <Response [502]>.status_code\n\nfunctional-tests/tests/test_availability_POSTE.py:59: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1770532985336,"stop":1770532985403,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"debtor_sp_mock_cert_key","time":{"start":1770533205161,"stop":1770533205203,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"poste_availability"},{"name":"story","value":"Service provider sends an RTP to POSTE directly"},{"name":"epic","value":"POSTE Availability"},{"name":"tag","value":"happy_path"},{"name":"feature","value":"RTP Send"},{"name":"tag","value":"functional"},{"name":"tag","value":"rtp_send"},{"name":"tag","value":"poste"},{"name":"tag","value":"happy_path"},{"name":"tag","value":"send"},{"name":"parentSuite","value":"functional-tests.tests"},{"name":"suite","value":"test_availability_POSTE"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"2650-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"functional-tests.tests.test_availability_POSTE"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":6,"broken":0,"skipped":0,"passed":106,"unknown":0,"total":112},"items":[{"uid":"aec97e8c100a6435","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/814/#testresult/aec97e8c100a6435","status":"passed","time":{"start":1770446349422,"stop":1770446350347,"duration":925}},{"uid":"3c4a34c4919c8aa1","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/813/#testresult/3c4a34c4919c8aa1","status":"passed","time":{"start":1770360691693,"stop":1770360693017,"duration":1324}},{"uid":"7a5db845f84387be","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/812/#testresult/7a5db845f84387be","status":"passed","time":{"start":1770290095879,"stop":1770290098160,"duration":2281}},{"uid":"58496367781cef26","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/811/#testresult/58496367781cef26","status":"passed","time":{"start":1770289275856,"stop":1770289277245,"duration":1389}},{"uid":"6cf484532a7d13cb","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/810/#testresult/6cf484532a7d13cb","status":"passed","time":{"start":1770288760435,"stop":1770288762313,"duration":1878}},{"uid":"6735aac167bef7c5","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/809/#testresult/6735aac167bef7c5","status":"passed","time":{"start":1770274484152,"stop":1770274484913,"duration":761}},{"uid":"f9755c095939cab2","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/808/#testresult/f9755c095939cab2","status":"passed","time":{"start":1770222439180,"stop":1770222439962,"duration":782}},{"uid":"c8b8a84de9ec33bd","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/807/#testresult/c8b8a84de9ec33bd","status":"passed","time":{"start":1770219312797,"stop":1770219313747,"duration":950}},{"uid":"3bd9bfb101cfec7b","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/806/#testresult/3bd9bfb101cfec7b","status":"passed","time":{"start":1770200980504,"stop":1770200981737,"duration":1233}},{"uid":"f06d620e9975b408","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/805/#testresult/f06d620e9975b408","status":"failed","statusDetails":"AssertionError: assert 400 == 201\n +  where 400 = <Response [400]>.status_code","time":{"start":1770195617322,"stop":1770195617981,"duration":659}},{"uid":"444a55ea95a0b8e1","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/804/#testresult/444a55ea95a0b8e1","status":"passed","time":{"start":1770187526418,"stop":1770187527208,"duration":790}},{"uid":"35b7dae8672ad510","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/803/#testresult/35b7dae8672ad510","status":"passed","time":{"start":1770101117135,"stop":1770101118127,"duration":992}},{"uid":"4b765cd15c406db1","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/802/#testresult/4b765cd15c406db1","status":"passed","time":{"start":1770032533677,"stop":1770032534672,"duration":995}},{"uid":"fe5247345d197411","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/801/#testresult/fe5247345d197411","status":"passed","time":{"start":1770015547476,"stop":1770015548289,"duration":813}},{"uid":"aee45d9a6c6a2fdc","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/800/#testresult/aee45d9a6c6a2fdc","status":"passed","time":{"start":1769928281166,"stop":1769928281938,"duration":772}},{"uid":"ea400dc6ccd91d6","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/799/#testresult/ea400dc6ccd91d6","status":"passed","time":{"start":1769841228470,"stop":1769841229326,"duration":856}},{"uid":"2ad511c4553e7d75","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/798/#testresult/2ad511c4553e7d75","status":"passed","time":{"start":1769755381920,"stop":1769755382711,"duration":791}},{"uid":"302486d145f7f8c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/797/#testresult/302486d145f7f8c","status":"passed","time":{"start":1769668964510,"stop":1769668965570,"duration":1060}},{"uid":"bde4fc9d6685224","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/796/#testresult/bde4fc9d6685224","status":"passed","time":{"start":1769617200836,"stop":1769617202000,"duration":1164}},{"uid":"87dfccaa9e603e59","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/795/#testresult/87dfccaa9e603e59","status":"passed","time":{"start":1769581911429,"stop":1769581913121,"duration":1692}}]},"tags":["rtp_send","functional","poste_availability","poste","send","happy_path"]},"source":"7b8e761a6d679a5b.json","parameterValues":[]}