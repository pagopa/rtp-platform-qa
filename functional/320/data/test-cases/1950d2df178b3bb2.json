{"uid":"1950d2df178b3bb2","name":"Unauthorized callback due to wrong certificate serial","fullName":"tests.test_callback#test_fail_send_rtp_callback_wrong_certificate_serial_DS_08P_compliant","historyId":"61610daabc7eba1095a613969245a72a","time":{"start":1746688018291,"stop":1746688018802,"duration":511},"status":"failed","statusMessage":"AssertionError: Expecting error from callback, expected 403 got 400\nassert 400 == 403\n +  where 400 = <Response [400]>.status_code","statusTrace":"@allure.feature('RTP Callback')\n    @allure.story('Service provider sends a callback referred to an RTP')\n    @allure.title('Unauthorized callback due to wrong certificate serial')\n    @pytest.mark.callback\n    @pytest.mark.unhappy_path\n    def test_fail_send_rtp_callback_wrong_certificate_serial_DS_08P_compliant():\n        callback_data = generate_callback_data_DS_08P_compliant(BIC='MOCKSP01')\n    \n        cert, key = pfx_to_pem(secrets.debtor_service_provider_mock_PFX_base64,\n                               secrets.debtor_service_provider_mock_PFX_password_base64,\n                               config.cert_path,\n                               config.key_path)\n    \n        callback_response = srtp_callback(rtp_payload=callback_data,\n                                          cert_path=cert,\n                                          key_path=key)\n>       assert callback_response.status_code == 403, f'Expecting error from callback, expected 403 got {callback_response.status_code}'\nE       AssertionError: Expecting error from callback, expected 403 got 400\nE       assert 400 == 403\nE        +  where 400 = <Response [400]>.status_code\n\nfunctional-tests/tests/test_callback.py:85: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1746688007987,"stop":1746688008046,"duration":59},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"story","value":"Service provider sends a callback referred to an RTP"},{"name":"feature","value":"RTP Callback"},{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"callback"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_callback"},{"name":"host","value":"fv-az813-883"},{"name":"thread","value":"2384-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_callback"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":22,"unknown":0,"total":23},"items":[{"uid":"e8ee129145c6d3b3","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/319//#testresult/e8ee129145c6d3b3","status":"passed","time":{"start":1746601636404,"stop":1746601636800,"duration":396}},{"uid":"dbfd8b3d8362c3","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/318//#testresult/dbfd8b3d8362c3","status":"passed","time":{"start":1746515228458,"stop":1746515229106,"duration":648}},{"uid":"ac7655ea03455097","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/317//#testresult/ac7655ea03455097","status":"passed","time":{"start":1746428862796,"stop":1746428863251,"duration":455}},{"uid":"573831b9a43f8b25","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/316//#testresult/573831b9a43f8b25","status":"passed","time":{"start":1746342415097,"stop":1746342415763,"duration":666}},{"uid":"e1ce025374435da3","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/315//#testresult/e1ce025374435da3","status":"passed","time":{"start":1746255991849,"stop":1746255992508,"duration":659}},{"uid":"b7b58c64bb7ffbb8","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/314//#testresult/b7b58c64bb7ffbb8","status":"passed","time":{"start":1746169623778,"stop":1746169624443,"duration":665}},{"uid":"9f19ae4b64805acb","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/313//#testresult/9f19ae4b64805acb","status":"passed","time":{"start":1746083250317,"stop":1746083250804,"duration":487}},{"uid":"cfc33fe6e2aa9c97","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/312//#testresult/cfc33fe6e2aa9c97","status":"passed","time":{"start":1745996831632,"stop":1745996832103,"duration":471}},{"uid":"12f87445d482dae2","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/311//#testresult/12f87445d482dae2","status":"passed","time":{"start":1745910436178,"stop":1745910436567,"duration":389}},{"uid":"1411e8db00b94a14","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/310//#testresult/1411e8db00b94a14","status":"passed","time":{"start":1745824811351,"stop":1745824811743,"duration":392}},{"uid":"2f45c694b02d2958","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/309//#testresult/2f45c694b02d2958","status":"passed","time":{"start":1745737590817,"stop":1745737591217,"duration":400}},{"uid":"81d7e99cc3c306e7","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/308//#testresult/81d7e99cc3c306e7","status":"passed","time":{"start":1745651192232,"stop":1745651192624,"duration":392}},{"uid":"d2bbe5a2bffbe869","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/307//#testresult/d2bbe5a2bffbe869","status":"passed","time":{"start":1745564819213,"stop":1745564819685,"duration":472}},{"uid":"9aad67d3cbd588d8","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/306//#testresult/9aad67d3cbd588d8","status":"passed","time":{"start":1745491295239,"stop":1745491295811,"duration":572}},{"uid":"f882dae9656a1809","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/305//#testresult/f882dae9656a1809","status":"passed","time":{"start":1745478439769,"stop":1745478440196,"duration":427}},{"uid":"484d66e298e4c073","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/304//#testresult/484d66e298e4c073","status":"passed","time":{"start":1745392040734,"stop":1745392041391,"duration":657}},{"uid":"deb736982ab90b54","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/303//#testresult/deb736982ab90b54","status":"passed","time":{"start":1745305622362,"stop":1745305622819,"duration":457}},{"uid":"8bbf0fc72a70d61c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/302//#testresult/8bbf0fc72a70d61c","status":"passed","time":{"start":1745219260936,"stop":1745219261514,"duration":578}},{"uid":"17c995988fe05d2e","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/301//#testresult/17c995988fe05d2e","status":"passed","time":{"start":1745132791104,"stop":1745132791606,"duration":502}},{"uid":"5577fd7bcbe967ec","reportUrl":"https://pagopa.github.io/rtp-platform-qa/functional/300//#testresult/5577fd7bcbe967ec","status":"passed","time":{"start":1745046388589,"stop":1745046388997,"duration":408}}]},"tags":["callback","unhappy_path"]},"source":"1950d2df178b3bb2.json","parameterValues":[]}