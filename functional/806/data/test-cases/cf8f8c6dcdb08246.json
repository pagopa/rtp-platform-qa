{"uid":"cf8f8c6dcdb08246","name":"All auth fixtures expose a valid Bearer token format","fullName":"functional-tests.tests.test_auth#test_all_token_fixtures_return_bearer_tokens","historyId":"a6570370c4fe100de2f48f744a9fb8bb","time":{"start":1770200944002,"stop":1770200944443,"duration":441},"status":"broken","statusMessage":"requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token","statusTrace":"request = <FixtureRequest for <Function test_all_token_fixtures_return_bearer_tokens[sp_activations_read_all_token]>>\ntoken_fixture_name = 'sp_activations_read_all_token'\n\n    @allure.epic('Authentication')\n    @allure.feature('Authentication Token Retrieval')\n    @allure.story('Service Provider authentication')\n    @allure.title('All auth fixtures expose a valid Bearer token format')\n    @allure.tag('functional', 'happy_path', 'authentication', 'authentication_token')\n    @pytest.mark.auth\n    @pytest.mark.happy_path\n    @pytest.mark.parametrize(\n        'token_fixture_name',\n        [\n            'debtor_service_provider_token_a',\n            'debtor_service_provider_token_b',\n            'creditor_service_provider_token_a',\n            'rtp_reader_access_token',\n            'pagopa_payee_registry_token',\n            'pagopa_service_providers_registry_token',\n            'sp_activations_read_all_token',\n        ],\n    )\n    def test_all_token_fixtures_return_bearer_tokens(request, token_fixture_name):\n>       token = request.getfixturevalue(token_fixture_name)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nfunctional-tests/tests/test_auth.py:41: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/_pytest/fixtures.py:548: in getfixturevalue\n    fixturedef = self._get_active_fixturedef(argname)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/_pytest/fixtures.py:639: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/_pytest/fixtures.py:1127: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/_pytest/fixtures.py:1195: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/_pytest/fixtures.py:929: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\nfunctional-tests/tests/conftest.py:392: in sp_activations_read_all_token\n    return get_valid_access_token(\napi/auth_api.py:10: in get_valid_access_token\n    token_response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [500]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: https://api-mcshared.uat.cstar.pagopa.it/auth/token\n\n/opt/hostedtoolcache/Python/3.14.2/x64/lib/python3.14/site-packages/requests/models.py:1026: HTTPError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1770200860179,"stop":1770200860246,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"feature","value":"Authentication Token Retrieval"},{"name":"tag","value":"happy_path"},{"name":"tag","value":"authentication_token"},{"name":"tag","value":"authentication"},{"name":"tag","value":"functional"},{"name":"epic","value":"Authentication"},{"name":"story","value":"Service Provider authentication"},{"name":"tag","value":"happy_path"},{"name":"tag","value":"auth"},{"name":"parentSuite","value":"functional-tests.tests"},{"name":"suite","value":"test_auth"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2642-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"functional-tests.tests.test_auth"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"token_fixture_name","value":"'sp_activations_read_all_token'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["functional","auth","authentication_token","happy_path","authentication"]},"source":"cf8f8c6dcdb08246.json","parameterValues":["'sp_activations_read_all_token'"]}