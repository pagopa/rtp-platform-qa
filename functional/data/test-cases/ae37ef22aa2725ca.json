{"uid":"ae37ef22aa2725ca","name":"Cannot send RTP with invalid amount","fullName":"functional-tests.tests.test_debtor_service_provider_availability#test_send_rtp_to_poste_invalid_amount","historyId":"4cf2c9ced376d02604d96beb5d8bef04","time":{"start":1762338678754,"stop":1762338678755,"duration":1},"status":"broken","statusMessage":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","statusTrace":"@allure.feature('RTP Send')\n    @allure.story('Service provider sends an RTP to POSTE')\n    @allure.title('Cannot send RTP with invalid amount')\n    @pytest.mark.send\n    @pytest.mark.unhappy_path\n    @pytest.mark.poste\n    def test_send_rtp_to_poste_invalid_amount():\n        rtp_data = generate_rtp_data()\n        rtp_data['paymentNotice']['amount'] = -1\n        poste_payload = generate_epc_rtp_data(rtp_data, bic='PPAYITR1XXX')\n>       response = send_srtp_to_poste(poste_payload)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nfunctional-tests/tests/test_debtor_service_provider_availability.py:138: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \napi/debtor_service_provider.py:29: in send_srtp_to_poste\n    return requests.post(\n/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/api.py:115: in post\n    return request(\"post\", url, data=data, json=json, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/api.py:59: in request\n    return session.request(method=method, url=url, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/sessions.py:589: in request\n    resp = self.send(prep, **send_kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/sessions.py:703: in send\n    r = adapter.send(request, **kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/adapters.py:616: in send\n    self.cert_verify(conn, request.url, verify, cert)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <requests.adapters.HTTPAdapter object at 0x7f18c2199e50>\nconn = <urllib3.connectionpool.HTTPSConnectionPool object at 0x7f18c20f09d0>\nurl = 'https://rtp.svil.poste.it:446/iso20022/api/v1/sepa-request-to-pay-requests'\nverify = False\ncert = ('/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem', '/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/key.pem')\n\n    def cert_verify(self, conn, url, verify, cert):\n        \"\"\"Verify a SSL certificate. This method should not be called from user\n        code, and is only exposed for use when subclassing the\n        :class:`HTTPAdapter <requests.adapters.HTTPAdapter>`.\n    \n        :param conn: The urllib3 connection object associated with the cert.\n        :param url: The requested URL.\n        :param verify: Either a boolean, in which case it controls whether we verify\n            the server's TLS certificate, or a string, in which case it must be a path\n            to a CA bundle to use\n        :param cert: The SSL certificate to verify.\n        \"\"\"\n        if url.lower().startswith(\"https\") and verify:\n            cert_loc = None\n    \n            # Allow self-specified cert location.\n            if verify is not True:\n                cert_loc = verify\n    \n            if not cert_loc:\n                cert_loc = extract_zipped_paths(DEFAULT_CA_BUNDLE_PATH)\n    \n            if not cert_loc or not os.path.exists(cert_loc):\n                raise OSError(\n                    f\"Could not find a suitable TLS CA certificate bundle, \"\n                    f\"invalid path: {cert_loc}\"\n                )\n    \n            conn.cert_reqs = \"CERT_REQUIRED\"\n    \n            if not os.path.isdir(cert_loc):\n                conn.ca_certs = cert_loc\n            else:\n                conn.ca_cert_dir = cert_loc\n        else:\n            conn.cert_reqs = \"CERT_NONE\"\n            conn.ca_certs = None\n            conn.ca_cert_dir = None\n    \n        if cert:\n            if not isinstance(cert, basestring):\n                conn.cert_file = cert[0]\n                conn.key_file = cert[1]\n            else:\n                conn.cert_file = cert\n                conn.key_file = None\n            if conn.cert_file and not os.path.exists(conn.cert_file):\n>               raise OSError(\n                    f\"Could not find the TLS certificate file, \"\n                    f\"invalid path: {conn.cert_file}\"\n                )\nE               OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem\n\n/opt/hostedtoolcache/Python/3.14.0/x64/lib/python3.14/site-packages/requests/adapters.py:327: OSError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1762338660807,"stop":1762338660873,"duration":66},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"story","value":"Service provider sends an RTP to POSTE"},{"name":"feature","value":"RTP Send"},{"name":"tag","value":"poste"},{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"send"},{"name":"parentSuite","value":"functional-tests.tests"},{"name":"suite","value":"test_debtor_service_provider_availability"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"2192-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"functional-tests.tests.test_debtor_service_provider_availability"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":11,"skipped":0,"passed":0,"unknown":0,"total":11},"items":[{"uid":"aa45c49f36bb3041","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762337537958,"stop":1762337537959,"duration":1}},{"uid":"ffca51a688a39109","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762335785937,"stop":1762335785939,"duration":2}},{"uid":"3d8f3f4d7bb92c42","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762335193132,"stop":1762335193133,"duration":1}},{"uid":"2f75b598819581a","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762334035217,"stop":1762334035218,"duration":1}},{"uid":"5c9a0e4a2a1f9895","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762333282196,"stop":1762333282197,"duration":1}},{"uid":"931b57a718e10f4b","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762332347303,"stop":1762332347304,"duration":1}},{"uid":"45e073e78850e7dc","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762331598974,"stop":1762331598975,"duration":1}},{"uid":"72f522443ec223cc","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762323835543,"stop":1762323835544,"duration":1}},{"uid":"175747015d2e15e3","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762272871877,"stop":1762272871878,"duration":1}},{"uid":"e1bd0568b33c8fd5","status":"broken","statusDetails":"OSError: Could not find the TLS certificate file, invalid path: /home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem","time":{"start":1762269035929,"stop":1762269035930,"duration":1}}]},"tags":["poste","unhappy_path","send"]},"source":"ae37ef22aa2725ca.json","parameterValues":[]}