{"uid":"4c9ad5e1267afb36","name":"Cannot send RTP with an amount over the POSTE limit","fullName":"functional-tests.tests.test_availability_POSTE#test_send_rtp_to_poste_over_limit_amount","historyId":"91e3b0a6ddf199149c5772992e11681e","time":{"start":1770360694569,"stop":1770360695921,"duration":1352},"description":"\nTests that sending an RTP payload with an amount over the POSTE limit results in a 400 Bad Request response.\n\n:param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.\n:type debtor_sp_mock_cert_key: Tuple[str, str]\n","descriptionHtml":"<p>Tests that sending an RTP payload with an amount over the POSTE limit results in a 400 Bad Request response.</p>\n<p>:param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.<br />\n:type debtor_sp_mock_cert_key: Tuple[str, str]</p>\n","status":"failed","statusMessage":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","statusTrace":"debtor_sp_mock_cert_key = ('/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/cert.pem', '/home/runner/work/rtp-platform-qa/rtp-platform-qa/config/key.pem')\n\n    @allure.epic('POSTE Availability')\n    @allure.feature('RTP Send')\n    @allure.story('Service provider sends an RTP to POSTE')\n    @allure.title('Cannot send RTP with an amount over the POSTE limit')\n    @allure.tag('functional', 'unhappy_path', 'rtp_send', 'poste_availability')\n    @pytest.mark.send\n    @pytest.mark.unhappy_path\n    @pytest.mark.poste\n    def test_send_rtp_to_poste_over_limit_amount(debtor_sp_mock_cert_key: Tuple[str, str]):\n        \"\"\"\n        Tests that sending an RTP payload with an amount over the POSTE limit results in a 400 Bad Request response.\n    \n        :param debtor_sp_mock_cert_key: Certificate and key tuple for mutual TLS authentication.\n        :type debtor_sp_mock_cert_key: Tuple[str, str]\n        \"\"\"\n        cert, key = debtor_sp_mock_cert_key\n    \n        over_limit_amount = 1_000_000_000_000\n        rtp_data = generate_rtp_data(amount=over_limit_amount)\n        poste_payload = generate_epc_rtp_data(rtp_data, bic='PPAYITR1XXX')\n        token = get_poste_access_token(\n            cert, key, secrets.poste_oauth.client_id, secrets.poste_oauth.client_secret)\n    \n        response = send_srtp_to_poste(token, poste_payload)\n    \n>       assert response.status_code == 400\nE       assert 201 == 400\nE        +  where 201 = <Response [201]>.status_code\n\nfunctional-tests/tests/test_availability_POSTE.py:112: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1770360389362,"stop":1770360389431,"duration":69},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"debtor_sp_mock_cert_key","time":{"start":1770360694526,"stop":1770360694569,"duration":43},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"rtp_send"},{"name":"tag","value":"poste_availability"},{"name":"feature","value":"RTP Send"},{"name":"epic","value":"POSTE Availability"},{"name":"tag","value":"functional"},{"name":"story","value":"Service provider sends an RTP to POSTE"},{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"poste"},{"name":"tag","value":"unhappy_path"},{"name":"tag","value":"send"},{"name":"parentSuite","value":"functional-tests.tests"},{"name":"suite","value":"test_availability_POSTE"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2586-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"functional-tests.tests.test_availability_POSTE"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":60,"broken":0,"skipped":0,"passed":50,"unknown":0,"total":110},"items":[{"uid":"7094793105196b75","reportUrl":"https://pagopa.github.io/rtp-platform-qa/812/#testresult/7094793105196b75","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770290099778,"stop":1770290100956,"duration":1178}},{"uid":"605bfc128a1134f6","reportUrl":"https://pagopa.github.io/rtp-platform-qa/811/#testresult/605bfc128a1134f6","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770289278608,"stop":1770289279415,"duration":807}},{"uid":"f3a61a59bec09c07","reportUrl":"https://pagopa.github.io/rtp-platform-qa/809/#testresult/f3a61a59bec09c07","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770274485590,"stop":1770274486221,"duration":631}},{"uid":"da594c34abd95df6","reportUrl":"https://pagopa.github.io/rtp-platform-qa/808/#testresult/da594c34abd95df6","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770222440741,"stop":1770222441985,"duration":1244}},{"uid":"df4e28797fd134e","reportUrl":"https://pagopa.github.io/rtp-platform-qa/807/#testresult/df4e28797fd134e","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770219314785,"stop":1770219315460,"duration":675}},{"uid":"669e910ce35ea637","reportUrl":"https://pagopa.github.io/rtp-platform-qa/806/#testresult/669e910ce35ea637","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770200983067,"stop":1770200984367,"duration":1300}},{"uid":"d75f754a4dee61da","reportUrl":"https://pagopa.github.io/rtp-platform-qa/805/#testresult/d75f754a4dee61da","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770195619033,"stop":1770195620108,"duration":1075}},{"uid":"4b075d10e0f933e4","reportUrl":"https://pagopa.github.io/rtp-platform-qa/804/#testresult/4b075d10e0f933e4","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770187527920,"stop":1770187528666,"duration":746}},{"uid":"fb6662eee3ac8d7c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/803/#testresult/fb6662eee3ac8d7c","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770101119080,"stop":1770101119925,"duration":845}},{"uid":"5e2d75f68f6e7fc7","reportUrl":"https://pagopa.github.io/rtp-platform-qa/802/#testresult/5e2d75f68f6e7fc7","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770032535766,"stop":1770032536600,"duration":834}},{"uid":"661e885eead14fa2","reportUrl":"https://pagopa.github.io/rtp-platform-qa/801/#testresult/661e885eead14fa2","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1770015548989,"stop":1770015549883,"duration":894}},{"uid":"8b40d69865727cfd","reportUrl":"https://pagopa.github.io/rtp-platform-qa/800/#testresult/8b40d69865727cfd","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769928283018,"stop":1769928284290,"duration":1272}},{"uid":"54054304b1d2d182","reportUrl":"https://pagopa.github.io/rtp-platform-qa/799/#testresult/54054304b1d2d182","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769841230096,"stop":1769841230635,"duration":539}},{"uid":"48b339f209188f16","reportUrl":"https://pagopa.github.io/rtp-platform-qa/798/#testresult/48b339f209188f16","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769755383439,"stop":1769755384230,"duration":791}},{"uid":"47fd56cf5c17be8d","reportUrl":"https://pagopa.github.io/rtp-platform-qa/797/#testresult/47fd56cf5c17be8d","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769668966533,"stop":1769668967310,"duration":777}},{"uid":"194386dbe141915b","reportUrl":"https://pagopa.github.io/rtp-platform-qa/796/#testresult/194386dbe141915b","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769617203693,"stop":1769617204735,"duration":1042}},{"uid":"9560a7c3a17178d7","reportUrl":"https://pagopa.github.io/rtp-platform-qa/795/#testresult/9560a7c3a17178d7","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769581914106,"stop":1769581915201,"duration":1095}},{"uid":"7e33b1ba9f4b420c","reportUrl":"https://pagopa.github.io/rtp-platform-qa/794/#testresult/7e33b1ba9f4b420c","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769520918886,"stop":1769520919590,"duration":704}},{"uid":"d5fffbba17469c73","reportUrl":"https://pagopa.github.io/rtp-platform-qa/793/#testresult/d5fffbba17469c73","status":"passed","time":{"start":1769495395717,"stop":1769495396342,"duration":625}},{"uid":"f0b6ad4e84855ff3","reportUrl":"https://pagopa.github.io/rtp-platform-qa/792/#testresult/f0b6ad4e84855ff3","status":"failed","statusDetails":"AssertionError: assert 201 == 400\n +  where 201 = <Response [201]>.status_code","time":{"start":1769409142061,"stop":1769409142837,"duration":776}}]},"tags":["rtp_send","functional","poste_availability","poste","unhappy_path","send"]},"source":"4c9ad5e1267afb36.json","parameterValues":[]}